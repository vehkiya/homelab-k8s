apiVersion: v1
kind: ConfigMap
metadata:
  name: renovate-config
  namespace: renovate
data:
  config.js: |-
    module.exports = {
        platform: 'github',
        autodiscover: true,
        autodiscoverNamespaces: ['vehkiya', 'hononeko'],
        
        gitAuthor: 'Kerrlab Renovate Bot <renovate-bot@kerrlab.app>',
        gitPrivateKey: fs.readFileSync('/usr/src/app/gpg/git-private-key', 'utf8'),
        
        optimizeForDisabled: true,
        
        onboardingConfig: {
            $schema: 'https://docs.renovatebot.com/renovate-schema.json',
            extends: ['config:recommended', ":semanticCommits", "mergeConfidence:all-badges"],
        },
        repositoryCache: 'enabled',
        requireConfig: 'required',
        hostRules: [
          {
            hostType: 'docker',
                matchHost: 'docker.io',
                username: process.env.DOCKER_USERNAME,
                password: process.env.DOCKER_PASSWORD,
          },
        ],
    };
