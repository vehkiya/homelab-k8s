apiVersion: batch/v1
kind: CronJob
metadata:
  name: bitwarden-sync-cron
  namespace: external-secrets
spec:
  schedule: "@hourly"
  jobTemplate:
    spec:
      template:
        metadata:
          labels:
            app: bitwarden-sync-cron
        spec:
          containers:
            - name: bitwarden-sync-trigger
              image: alpine/k8s
              args:
                - curl
                - -X
                - POST
                - http://bitwarden-cli-service:8087/sync
              resources:
                requests:
                  cpu: 10m
                  memory: 32Mi
                limits:
                  cpu: 100m
                  memory: 64Mi
          restartPolicy: OnFailure
