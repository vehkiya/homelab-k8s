# ConfigMap for non-sensitive configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: bar-assistant-config
  namespace: home
data:
  # --- Common ---
  # Set the external URL where the application will be accessed
  APP_URL: "https://bar.kerrlab.app"
  # Set the external URL for Meilisearch (used by Salt Rim frontend)
  # Ensure Meilisearch is also exposed via Traefik at this address
  MEILISEARCH_URL: "https://meilisearch.kerrlab.app"

  # --- Bar Assistant Server ---
  # Internal hostname for Meilisearch Service within the cluster
  MEILISEARCH_HOST: "http://meilisearch-kubernetes.default.svc.cluster.local:7700"
  # Internal hostname for Redis Service within the cluster
  REDIS_HOST: "redis-master.redis.svc.cluster.local"
  CACHE_DRIVER: "redis"
  SESSION_DRIVER: "redis"
  ALLOW_REGISTRATION: "true"

  # --- Salt Rim Frontend ---
  # API_URL points to the base domain; Salt Rim appends /api internally
  API_URL: "https://bar.kerrlab.app/bar"
  # This matches the Ingress path for the backend
  AUTHELIA_BASE_URL: "https://auth.kerrlab.app"
  AUTHELIA_CLIENT_ID: "bar-assistant"
  AUTHELIA_REDIRECT_URI: "https://bar.kerrlab.app/oauth/callback"
